PROJECT (handystats)
CMAKE_MINIMUM_REQUIRED (VERSION 2.8)


ADD_DEFINITIONS ("-O2 -std=c++0x -Wreorder -Wreturn-type -Wunused-variable -pedantic")


# TBB Library
SET (CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_CURRENT_SOURCE_DIR}/CMake/FindTBB/")
FIND_PACKAGE (TBB REQUIRED)


INCLUDE_DIRECTORIES (${PROJECT_SOURCE_DIR}/include ${PROJECT_SOURCE_DIR}/src ${TBB_INCLUDE_DIRS})

SET (CMAKE_LIBRARY_OUTPUT_DIRECTORY "lib/")


FILE (STRINGS ${PROJECT_SOURCE_DIR}/source_files.cmake handy_src)
ADD_LIBRARY (${PROJECT_NAME} SHARED ${handy_src})

TARGET_LINK_LIBRARIES (${PROJECT_NAME} tbb rt)


INSTALL (TARGETS ${PROJECT_NAME} LIBRARY DESTINATION ${CMAKE_INSTALL_PREFIX}/lib)
INSTALL (DIRECTORY ${PROJECT_SOURCE_DIR}/include/${PROJECT_NAME} DESTINATION ${CMAKE_INSTALL_PREFIX}/include)


ENABLE_TESTING ()
ADD_SUBDIRECTORY (tests)

