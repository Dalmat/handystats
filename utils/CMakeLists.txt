CMAKE_MINIMUM_REQUIRED (VERSION 2.8)

SET (UTILS_LIBRARIES ${PROJECT_NAME})

SET (UTILS_LINK_FLAGS "-Wl,-rpath,${CMAKE_CURRENT_BINARY_DIR}:${CMAKE_CURRENT_BINARY_DIR}/../${CMAKE_LIBRARY_OUTPUT_DIRECTORY}")
SET (UTILS_PROPERTIES PROPERTIES LINK_FLAGS "${UTILS_LINK_FLAGS}" LINKER_LANGUAGE CXX)

ADD_CUSTOM_TARGET(utils)

ADD_EXECUTABLE (log-aggregate EXCLUDE_FROM_ALL ${CMAKE_CURRENT_SOURCE_DIR}/log-aggregate.cpp)
SET_TARGET_PROPERTIES (log-aggregate ${UTILS_PROPERTIES})
TARGET_LINK_LIBRARIES (log-aggregate ${UTILS_LIBRARIES})
ADD_DEPENDENCIES (utils log-aggregate)

INSTALL (TARGETS log-aggregate RUNTIME DESTINATION ${CMAKE_INSTALL_PREFIX}/bin/handystats)

